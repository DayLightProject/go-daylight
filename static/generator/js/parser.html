<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src="js/libs/js-class.js"></script>
    <script src="js/libs/jquery-3.2.1.min.js"></script>
    <script src="js/parser.js?13"></script>
    <script src="js/code-generator.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <style>
        .b-tag {
            position: relative;
        }
        .b-draggable-inside {
            background-color: #AAAAFF;
        }
        /* .b-draggable-inside:before {
            content: " ";
            display: block;
            position: absolute;
            top: 0; right: 0;
            bottom: 0; left: 0;
            box-sizing: border-box !important;
            border: 3px dashed #8AF;
            z-index: 1000;
            background: rgba(100, 200, 255, 0.2);
        } */
    </style>

</head>
<body style="padding: 20px;">

<div class="b-container js-container2">
    <div class="b-tag js-droppable">
        <a class="b-tag js-droppable js-draggable" id="gen_12412" href="https://ya.ru" >Поиск в Яндекс</a>
        <a class="b-tag js-droppable js-draggable" id="gen_12413" href="https://google.ru">Поиск в Гугл</a>
        <a class="b-tag js-droppable js-draggable" id="gen_12414" href="https://bing.ru">Поиск в Bing</a>
        <div class="b-tag js-droppable js-draggable g-padding" id="gen_668678">
            <!--<div class="g-red">-->
                <p class="b-tag js-droppable js-draggable">p text here</p>
                <div class="b-tag js-droppable js-draggable g-padding" id="gen_668628">
                    <div class="g-red">
                        inner divs here
                    </div>
                </div>
            <!--</div>-->
        </div>
    </div>
</div>

<textarea  class="js-input" style="width: 100%; height: 300px;" placeholder="Введите код шаблона">

    Divs(row)
Divs(col-xs-6)
Divs(panel panel-default, panel-body)

  P(``b-green``, Текст абзаца)

DivsEnd:

DivsEnd:

Divs(col-xs-6)
  Image(https://www.vectorlogo.zone/logos/getbootstrap/getbootstrap-card.png, бутстрап)

 UList(b-big, ol)
  Li:первый
  Li:второй
  Li(третий, text-danger)
  LiBegin:text-success
    A{text=Искать в яндексе, href = "https://yaaandex.ru/search", class=pull-right}
  LiEnd:
  LiBegin(text-success)
    A{text=Искать в google, href = "https://goooogle.com/search", class=b-big b-info}

    Divs(pull-left b-red, b-panel)
    P(``b-green``, Текс абзаца)
    A(text-danger,тект ссылки, ``http://yaaa.ru``)
    DivsEnd:
  LiEnd:

Li:привет
UListEnd:

DivsEnd:

DivsEnd:

A(bg-success,поиск в яндекс, ``http://ya.ru``)

UList(b-big, ol)
  Li:первый
  Li:второй
  Li(третий, b-underline)
  LiBegin:b-big
    A{text=Искать в яндексе, href = "https://yaaandex.ru/search", class=b-big b-info}
  LiEnd:

  LiBegin(b-big b-blue)
  A{text=Искать в google, href = "https://goooogle.com/search", class=b-big b-info}

  Divs(pull-left b-red, b-panel)
  P(``b-green``, Текс абзаца)
  A(b-big,тект ссылки, ``http://yaaa.ru``)
  DivsEnd:

  LiEnd:
Li:привет
UListEnd:
</textarea>

<h2>Древовидное представление</h2>
<p class="js-error" style="color: red;"></p>
<p class="js-output"></p>
<h2>Преобразование в код шаблона</h2>
<pre class="js-code-generated"></pre>
<h2>Визуальное представление</h2>

<div style="position: relative">
    <div style="width: 230px; position: absolute; left: 0; top: 0; border-right: 1px solid #EEE;">
        <div style="padding: 10px;">
            <h4>Элементы управления</h4>
            <div class="js-constructor-elements">

            </div>
        </div>

    </div>
    <div style="position: absolute; right: 0; top: 0; width: 100%;">
        <div style="margin-left: 250px;" class="js-constructor-container">
        </div>
    </div>
</div>



<script>

    $(document).ready(function() {

        var codeGenerator = new CodeGenerator();

        var $input = $(".js-input");
        var $output = $(".js-output");
        var $error = $(".js-error");
        var $codeGenerated = $(".js-code-generated");
        var $constructorContainer = $(".js-constructor-container");
        $input.on("change keyup", function() {
            $error.html("");
            try {
                var result = parser.parse($input.val());
                //console.log(result);
                $output.html(JSON.stringify(result));
                $codeGenerated.html(codeGenerator.generateCode(result));
                $constructorContainer.html(codeGenerator.generateHTML(result));
            }
            catch (e) {
                $output.html("");
                $error.html(e.message);
            }               
        });

        $input.trigger("change");

        var dragAndDrop = new DragAndDrop({
            $container: $(".js-container2")
        });
    });

</script>

</body>
</html>